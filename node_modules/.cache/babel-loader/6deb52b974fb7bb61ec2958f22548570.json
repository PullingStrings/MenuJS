{"ast":null,"code":"import _classCallCheck from\"/Users/titozwane/Documents/menuJS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/titozwane/Documents/menuJS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/titozwane/Documents/menuJS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/titozwane/Documents/menuJS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import getCourseItems from\"../../../utils/courseItem\";import getItemIndex from\"../../../utils/itemIndex\";import OrderView from\"./order-view\";import OrderSummary from\"./order-summary\";import Grid from\"@material-ui/core/Grid\";var OrderContainer=/*#__PURE__*/function(_Component){_inherits(OrderContainer,_Component);var _super=_createSuper(OrderContainer);function OrderContainer(props){var _this;_classCallCheck(this,OrderContainer);_this=_super.call(this,props);_this.fetchData=function(){var selectedItems=_this.state.selectedItems;var jsonData=require(\"../../../assets/data/fe-tech-data.json\");var courseItems=getCourseItems(jsonData,_this.props.course);if(Object.entries(selectedItems).length===0){jsonData.map(function(res){/* Add empty arrays for each course to add items later */return selectedItems[res.courseType[0]]=[];});}_this.setState({courseItems:courseItems,selectedItems:selectedItems});};_this.handleItems=function(id,itemTitle,itemPrice){var selectedItems=_this.state.selectedItems;var course=_this.props.course;var item={id:id,title:itemTitle,price:itemPrice};if(selectedItems[course].length!==0){var index=selectedItems[course].findIndex(function(item){return item.id===id;});var index2=getItemIndex(selectedItems[course],id);console.log(itemPrice+=0);// console.log(index+\" \"+index2)\n/* If index is not negative delete the item */if(index>=0){selectedItems[course].splice(index,1);_this.setState({selectedItems:selectedItems});return;}}selectedItems[course].push(item);_this.setState({selectedItems:selectedItems});};_this.handleNextCourse=function(){var selectedItems=_this.state.selectedItems;var course=_this.props.course;if(Object.keys(selectedItems).length-1!==course){/* Check if at least one item is selected in main couse */if(course===1){if(selectedItems[course].length===0){alert(\"Select at least one item from this course.\");return;}}_this.props.changeCourse(course+1);}else{_this.props.summaryHandler();}};_this.handleChangeOrder=function(){_this.props.changeCourse();_this.props.summaryHandler();};_this.state={courseItems:[],selectedItems:{}};return _this;}_createClass(OrderContainer,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchData();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(props){if(this.props!==props){this.fetchData();}}},{key:\"render\",value:function render(){if(this.props.summary){return/*#__PURE__*/React.createElement(\"div\",{className:\"summary-container\"},/*#__PURE__*/React.createElement(OrderSummary,{selectedItems:this.state.selectedItems}),/*#__PURE__*/React.createElement(\"button\",{className:\"button default\",onClick:this.handleChangeOrder},\"Change order\"));}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"order-container\"},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(OrderView,Object.assign({},this.state,{course:this.props.course,itemHandler:this.handleItems}))),/*#__PURE__*/React.createElement(\"button\",{className:\"button default\",onClick:this.handleNextCourse},Object.keys(this.state.selectedItems).length-1!==this.props.course?\"Next course\":\"Show complete order\"));}}}]);return OrderContainer;}(Component);export{OrderContainer as default};","map":{"version":3,"sources":["/Users/titozwane/Documents/menuJS/src/components/app/order/order-container.js"],"names":["React","Component","getCourseItems","getItemIndex","OrderView","OrderSummary","Grid","OrderContainer","props","fetchData","selectedItems","state","jsonData","require","courseItems","course","Object","entries","length","map","res","courseType","setState","handleItems","id","itemTitle","itemPrice","item","title","price","index","findIndex","index2","console","log","splice","push","handleNextCourse","keys","alert","changeCourse","summaryHandler","handleChangeOrder","summary"],"mappings":"glBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,cAAP,KAA2B,2BAA3B,CACA,MAAOC,CAAAA,YAAP,KAAyB,0BAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,cAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,iBAAzB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,C,GAEqBC,CAAAA,c,gHACnB,wBAAYC,KAAZ,CAAmB,gDACjB,uBAAMA,KAAN,EADiB,MAkBnBC,SAlBmB,CAkBP,UAAM,IACVC,CAAAA,aADU,CACQ,MAAKC,KADb,CACVD,aADU,CAEhB,GAAME,CAAAA,QAAQ,CAAGC,OAAO,CAAC,wCAAD,CAAxB,CACA,GAAMC,CAAAA,WAAW,CAAGZ,cAAc,CAACU,QAAD,CAAW,MAAKJ,KAAL,CAAWO,MAAtB,CAAlC,CAEA,GAAIC,MAAM,CAACC,OAAP,CAAeP,aAAf,EAA8BQ,MAA9B,GAAyC,CAA7C,CAAgD,CAC9CN,QAAQ,CAACO,GAAT,CAAa,SAAAC,GAAG,CAAI,CAClB,yDACA,MAAQV,CAAAA,aAAa,CAACU,GAAG,CAACC,UAAJ,CAAe,CAAf,CAAD,CAAb,CAAmC,EAA3C,CACD,CAHD,EAID,CACD,MAAKC,QAAL,CAAc,CACZR,WAAW,CAAXA,WADY,CAEZJ,aAAa,CAAbA,aAFY,CAAd,EAID,CAjCkB,OAmCnBa,WAnCmB,CAmCL,SAACC,EAAD,CAAKC,SAAL,CAAgBC,SAAhB,CAA8B,IACpChB,CAAAA,aADoC,CAClB,MAAKC,KADa,CACpCD,aADoC,IAElCK,CAAAA,MAFkC,CAEvB,MAAKP,KAFkB,CAElCO,MAFkC,CAG1C,GAAMY,CAAAA,IAAI,CAAG,CAAEH,EAAE,CAAEA,EAAN,CAAUI,KAAK,CAAEH,SAAjB,CAA4BI,KAAK,CAAEH,SAAnC,CAAb,CAEA,GAAIhB,aAAa,CAACK,MAAD,CAAb,CAAsBG,MAAtB,GAAiC,CAArC,CAAwC,CACtC,GAAIY,CAAAA,KAAK,CAAGpB,aAAa,CAACK,MAAD,CAAb,CAAsBgB,SAAtB,CAAgC,SAAAJ,IAAI,QAAIA,CAAAA,IAAI,CAACH,EAAL,GAAYA,EAAhB,EAApC,CAAZ,CACA,GAAIQ,CAAAA,MAAM,CAAG7B,YAAY,CAACO,aAAa,CAACK,MAAD,CAAd,CAAwBS,EAAxB,CAAzB,CACAS,OAAO,CAACC,GAAR,CAAYR,SAAS,EAAI,CAAzB,EACA;AAEA,8CACA,GAAII,KAAK,EAAI,CAAb,CAAgB,CACdpB,aAAa,CAACK,MAAD,CAAb,CAAsBoB,MAAtB,CAA6BL,KAA7B,CAAoC,CAApC,EACA,MAAKR,QAAL,CAAc,CACZZ,aAAa,CAAbA,aADY,CAAd,EAGA,OACD,CACF,CAEDA,aAAa,CAACK,MAAD,CAAb,CAAsBqB,IAAtB,CAA2BT,IAA3B,EAEA,MAAKL,QAAL,CAAc,CACZZ,aAAa,CAAbA,aADY,CAAd,EAGD,CA7DkB,OA+DnB2B,gBA/DmB,CA+DA,UAAM,IACf3B,CAAAA,aADe,CACG,MAAKC,KADR,CACfD,aADe,IAEfK,CAAAA,MAFe,CAEJ,MAAKP,KAFD,CAEfO,MAFe,CAGvB,GAAIC,MAAM,CAACsB,IAAP,CAAY5B,aAAZ,EAA2BQ,MAA3B,CAAoC,CAApC,GAA0CH,MAA9C,CAAsD,CACpD,0DACA,GAAIA,MAAM,GAAK,CAAf,CAAkB,CAChB,GAAIL,aAAa,CAACK,MAAD,CAAb,CAAsBG,MAAtB,GAAiC,CAArC,CAAwC,CACtCqB,KAAK,CAAC,4CAAD,CAAL,CACA,OACD,CACF,CACD,MAAK/B,KAAL,CAAWgC,YAAX,CAAwBzB,MAAM,CAAG,CAAjC,EACD,CATD,IASO,CACL,MAAKP,KAAL,CAAWiC,cAAX,GACD,CACF,CA9EkB,OAgFnBC,iBAhFmB,CAgFC,UAAM,CACxB,MAAKlC,KAAL,CAAWgC,YAAX,GACA,MAAKhC,KAAL,CAAWiC,cAAX,GACD,CAnFkB,CAEjB,MAAK9B,KAAL,CAAa,CACXG,WAAW,CAAE,EADF,CAEXJ,aAAa,CAAE,EAFJ,CAAb,CAFiB,aAMlB,C,wFAEmB,CAClB,KAAKD,SAAL,GACD,C,8DAEkBD,K,CAAO,CACxB,GAAI,KAAKA,KAAL,GAAeA,KAAnB,CAA0B,CACxB,KAAKC,SAAL,GACD,CACF,C,uCAqEQ,CACP,GAAI,KAAKD,KAAL,CAAWmC,OAAf,CAAwB,CACtB,mBACE,2BAAK,SAAS,CAAC,mBAAf,eACE,oBAAC,YAAD,EAAc,aAAa,CAAE,KAAKhC,KAAL,CAAWD,aAAxC,EADF,cAEE,8BAAQ,SAAS,CAAC,gBAAlB,CAAmC,OAAO,CAAE,KAAKgC,iBAAjD,iBAFF,CADF,CAQD,CATD,IASO,CACL,mBACE,2BAAK,SAAS,CAAC,iBAAf,eACE,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,eACE,oBAAC,SAAD,kBACM,KAAK/B,KADX,EAEE,MAAM,CAAE,KAAKH,KAAL,CAAWO,MAFrB,CAGE,WAAW,CAAE,KAAKQ,WAHpB,GADF,CADF,cAQE,8BAAQ,SAAS,CAAC,gBAAlB,CAAmC,OAAO,CAAE,KAAKc,gBAAjD,EACGrB,MAAM,CAACsB,IAAP,CAAY,KAAK3B,KAAL,CAAWD,aAAvB,EAAsCQ,MAAtC,CAA+C,CAA/C,GACD,KAAKV,KAAL,CAAWO,MADV,CAEG,aAFH,CAGG,qBAJN,CARF,CADF,CAiBD,CACF,C,4BAnHyCd,S,SAAvBM,c","sourcesContent":["import React, { Component } from \"react\"\nimport getCourseItems from \"../../../utils/courseItem\"\nimport getItemIndex from \"../../../utils/itemIndex\"\nimport OrderView from \"./order-view\"\nimport OrderSummary from \"./order-summary\"\nimport Grid from \"@material-ui/core/Grid\"\n\nexport default class OrderContainer extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      courseItems: [],\n      selectedItems: {}\n    }\n  }\n\n  componentDidMount() {\n    this.fetchData()\n  }\n\n  componentDidUpdate(props) {\n    if (this.props !== props) {\n      this.fetchData()\n    }\n  }\n\n  fetchData = () => {\n    let { selectedItems } = this.state\n    const jsonData = require(\"../../../assets/data/fe-tech-data.json\")\n    const courseItems = getCourseItems(jsonData, this.props.course)\n\n    if (Object.entries(selectedItems).length === 0) {\n      jsonData.map(res => {\n        /* Add empty arrays for each course to add items later */\n        return (selectedItems[res.courseType[0]] = [])\n      })\n    }\n    this.setState({\n      courseItems,\n      selectedItems\n    })\n  }\n\n  handleItems = (id, itemTitle, itemPrice) => {\n    let { selectedItems } = this.state\n    const { course } = this.props\n    const item = { id: id, title: itemTitle, price: itemPrice }\n\n    if (selectedItems[course].length !== 0) {\n      let index = selectedItems[course].findIndex(item => item.id === id)\n      let index2 = getItemIndex(selectedItems[course], id)\n      console.log(itemPrice += 0);\n      // console.log(index+\" \"+index2)\n\n      /* If index is not negative delete the item */\n      if (index >= 0) {\n        selectedItems[course].splice(index, 1)\n        this.setState({\n          selectedItems\n        })\n        return\n      }\n    }\n\n    selectedItems[course].push(item)\n\n    this.setState({\n      selectedItems\n    })\n  }\n\n  handleNextCourse = () => {\n    const { selectedItems } = this.state\n    const { course } = this.props\n    if (Object.keys(selectedItems).length - 1 !== course) {\n      /* Check if at least one item is selected in main couse */\n      if (course === 1) {\n        if (selectedItems[course].length === 0) {\n          alert(\"Select at least one item from this course.\")\n          return\n        }\n      }\n      this.props.changeCourse(course + 1)\n    } else {\n      this.props.summaryHandler()\n    }\n  }\n\n  handleChangeOrder = () => {\n    this.props.changeCourse()\n    this.props.summaryHandler()\n  }\n\n  render() {\n    if (this.props.summary) {\n      return (\n        <div className=\"summary-container\">\n          <OrderSummary selectedItems={this.state.selectedItems} />\n          <button className=\"button default\" onClick={this.handleChangeOrder}>\n            Change order\n          </button>\n        </div>\n      )\n    } else {\n      return (\n        <div className=\"order-container\">\n          <Grid container spacing={3}>\n            <OrderView\n              {...this.state}\n              course={this.props.course}\n              itemHandler={this.handleItems}\n            />\n          </Grid>\n          <button className=\"button default\" onClick={this.handleNextCourse}>\n            {Object.keys(this.state.selectedItems).length - 1 !==\n            this.props.course\n              ? \"Next course\"\n              : \"Show complete order\"}\n          </button>\n        </div>\n      )\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}